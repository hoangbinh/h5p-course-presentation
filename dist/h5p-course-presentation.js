(()=>{var e={46:e=>{e.exports=function(e,t){this.index=e,this.parent=t}},575:(e,t,i)=>{const s=i(46),n=H5P.EventDispatcher;function r(e,t){const i=this;n.call(i),i.children=[];var r=function(e){for(let t=e;t<i.children.length;t++)i.children[t].index=t};if(i.addChild=function(t,n){void 0===n&&(n=i.children.length);const o=new s(n,i);return n===i.children.length?i.children.push(o):(i.children.splice(n,0,o),r(n)),e.call(o,t),o},i.removeChild=function(e){i.children.splice(e,1),r(e)},i.moveChild=function(e,t){const s=i.children.splice(e,1)[0];i.children.splice(t,0,s),r(t<e?t:e)},t)for(let e=0;e<t.length;e++)i.addChild(t[e])}r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(575),t=i.n(e);const s=H5P.jQuery,n=H5P.EventDispatcher,r=H5P.JoubelUI,o=e=>e.concat.apply([],e),a=e=>"function"==typeof e,l=null!==navigator.userAgent.match(/iPad/i),d=null!==navigator.userAgent.match(/iPad|iPod|iPhone/i),h=(e,t)=>-1!==e.indexOf(t),c=(e,t)=>void 0!==e?e:t,p=13,u=27,m=32,f=function(e,t,i){e.click((function(e){t.call(i||this,e)})),e.keydown((function(e){h([p,m],e.which)&&(e.preventDefault(),t.call(i||this,e))}))},v=s("<div>"),g=function(){function e(e,t){this.$summarySlide=t,this.cp=e}return e.prototype.updateSummarySlide=function(e,t){var i=this,n=void 0===this.cp.editor&&void 0!==this.$summarySlide&&e>=this.cp.slides.length-1,o=!this.cp.showSummarySlide&&this.cp.hasAnswerElements;if(n){i.cp.presentation.keywordListEnabled&&i.cp.presentation.keywordListAlwaysShow&&i.cp.hideKeywords(),this.$summarySlide.children().remove();var a=i.cp.getSlideScores(t),l=i.outputScoreStats(a);if(s(l).appendTo(i.$summarySlide),!o){var d=i.totalScores(a);if(!isNaN(d.totalPercentage)){var h=r.createScoreBar(d.totalMaxScore,"","","");h.setScore(d.totalScore);var c=s(".h5p-summary-total-score",i.$summarySlide);h.appendTo(c),setTimeout((()=>{c.append(s("<div/>",{"aria-live":"polite",class:"hidden-but-read",html:i.cp.l10n.summary+". "+i.cp.l10n.accessibilityTotalScore.replace("@score",d.totalScore).replace("@maxScore",d.totalMaxScore)}))}),100)}if(1==i.cp.enableTwitterShare){var p=s(".h5p-summary-twitter-message",i.$summarySlide);this.addTwitterScoreLinkTo(p,d)}if(1==i.cp.enableFacebookShare){var u=s(".h5p-summary-facebook-message",i.$summarySlide);this.addFacebookScoreLinkTo(u,d)}if(1==i.cp.enableGoogleShare){var m=s(".h5p-summary-google-message",i.$summarySlide);this.addGoogleScoreLinkTo(m)}i.$summarySlide.find(".h5p-td > .h5p-slide-link").each((function(){var e=s(this);e.click((function(t){i.cp.jumpToSlide(parseInt(e.data("slide"),10)-1),t.preventDefault()}))}))}var f=s(".h5p-summary-footer",i.$summarySlide);this.cp.showSummarySlideSolutionButton&&r.createButton({class:"h5p-show-solutions",html:i.cp.l10n.showSolutions,on:{click:function(){i.toggleSolutionMode(!0)}},appendTo:f}),this.cp.showSummarySlideRetryButton&&r.createButton({class:"h5p-cp-retry-button",html:i.cp.l10n.retry,on:{click:function(){i.cp.resetTask()}},appendTo:f}),i.cp.hasAnswerElements&&r.createButton({class:"h5p-eta-export",html:i.cp.l10n.exportAnswers,on:{click:function(){H5P.ExportableTextArea.Exporter.run(i.cp.slides,i.cp.elementInstances)}},appendTo:f})}},e.prototype.outputScoreStats=function(e){if(void 0===e)return this.$summarySlide.addClass("h5p-summary-only-export"),'<div class="h5p-summary-footer"></div>';var t,i=this,s=0,n=0,r="",o=0,a="";for(t=0;t<e.length;t+=1)a=this.getSlideDescription(e[t]),o=Math.round(e[t].score/e[t].maxScore*100),isNaN(o)&&(o=0),r+='<tr><td class="h5p-td h5p-summary-task-title"><a href="#" class="h5p-slide-link"  aria-label=" '+i.cp.l10n.slide+" "+e[t].slide+": "+a.replace(/(<([^>]+)>)/gi,"")+" "+o+'%" data-slide="'+e[t].slide+'">'+i.cp.l10n.slide+" "+e[t].slide+": "+a.replace(/(<([^>]+)>)/gi,"")+'</a></td><td class="h5p-td h5p-summary-score-bar"><p class="hidden-but-read">'+o+"%</p><p>"+e[t].score+"<span>/</span>"+e[t].maxScore+"</p></td></tr>",s+=e[t].score,n+=e[t].maxScore;this.cp.isSolutionMode||this.cp.ignoreResize||i.cp.triggerXAPICompleted(s,n);var l=i.cp.enableTwitterShare||i.cp.enableFacebookShare||i.cp.enableGoogleShare?'<span class="h5p-show-results-text">'+i.cp.l10n.shareResult+"</span>":"",d=1==i.cp.enableTwitterShare?'<span class="h5p-summary-twitter-message" aria-label="'+i.cp.l10n.shareTwitter+'"></span>':"",h=1==i.cp.enableFacebookShare?'<span class="h5p-summary-facebook-message" aria-label="'+i.cp.l10n.shareFacebook+'"></span>':"",c=1==i.cp.enableGoogleShare?'<span class="h5p-summary-google-message" aria-label="'+i.cp.l10n.shareGoogle+'"></span>':"";return'<div class="h5p-summary-table-holder"><div class="h5p-summary-table-pages"><table class="h5p-score-table"><thead><tr><th class="h5p-summary-table-header slide">'+i.cp.l10n.slide+'</th><th class="h5p-summary-table-header score">'+i.cp.l10n.score+"<span>/</span>"+i.cp.l10n.total.toLowerCase()+"</th></tr></thead><tbody>"+r+'</tbody></table></div><div class="h5p-summary-total-table"><div class="h5p-summary-social">'+l+h+d+c+'</div><div class="h5p-summary-total-score"><p>'+i.cp.l10n.totalScore+'</p></div></div></div><div class="h5p-summary-footer"></div>'},e.prototype.getSlideDescription=function(e){var t,i,s=this,n=s.cp.slides[e.slide-1];if(s.cp.hasKeywords(n))return n.keywords[0].main;var r=s.cp.slides[e.slide-1].elements;if(e.indexes.length>1)t=s.cp.l10n.summaryMultipleTaskText;else if(void 0!==r[e.indexes[0]]&&r[0])if(i=r[e.indexes[0]].action,"function"==typeof s.cp.elementInstances[e.slide-1][e.indexes[0]].getTitle)t=s.cp.elementInstances[e.slide-1][e.indexes[0]].getTitle();else if(void 0!==i.library&&i.library){var o=i.library.split(" ")[0].split(".")[1].split(/(?=[A-Z])/),a="";o.forEach((function(e,t){0!==t&&(e=e.toLowerCase()),a+=e,t<=o.length-1&&(a+=" ")})),t=a}return t},e.prototype.addTwitterScoreLinkTo=function(e,t){var i=this,s=i.cp.twitterShareStatement||"",n=i.cp.twitterShareHashtags||"",r=i.cp.twitterShareUrl||"";r=r.replace("@currentpageurl",window.location.href),s=s.replace("@score",t.totalScore).replace("@maxScore",t.totalMaxScore).replace("@percentage",t.totalPercentage+"%").replace("@currentpageurl",window.location.href),n=n.trim().replace(" ",""),s=encodeURIComponent(s),n=encodeURIComponent(n),r=encodeURIComponent(r);var o="https://twitter.com/intent/tweet?";o+=s.length>0?"text="+s+"&":"",o+=r.length>0?"url="+r+"&":"",o+=n.length>0?"hashtags="+n:"";var a=window.innerWidth/2,l=window.innerHeight/2;e.attr("tabindex","0").attr("role","button"),f(e,(()=>(window.open(o,i.cp.l10n.shareTwitter,"width=800,height=300,left="+a+",top="+l),!1)))},e.prototype.addFacebookScoreLinkTo=function(e,t){var i=this,s=i.cp.facebookShareUrl||"",n=i.cp.facebookShareQuote||"";s=s.replace("@currentpageurl",window.location.href),n=n.replace("@currentpageurl",window.location.href).replace("@percentage",t.totalPercentage+"%").replace("@score",t.totalScore).replace("@maxScore",t.totalMaxScore),s=encodeURIComponent(s),n=encodeURIComponent(n);var r="https://www.facebook.com/sharer/sharer.php?";r+=s.length>0?"u="+s+"&":"",r+=n.length>0?"quote="+n:"";var o=window.innerWidth/2,a=window.innerHeight/2;e.attr("tabindex","0").attr("role","button"),f(e,(()=>(window.open(r,i.cp.l10n.shareFacebook,"width=800,height=300,left="+o+",top="+a),!1)))},e.prototype.addGoogleScoreLinkTo=function(e){var t=this,i=t.cp.googleShareUrl||"";i=i.replace("@currentpageurl",window.location.href),i=encodeURIComponent(i);var s="https://plus.google.com/share?";s+=i.length>0?"url="+i:"";var n=window.innerWidth/2,r=window.innerHeight/2;e.attr("tabindex","0").attr("role","button"),f(e,(()=>(window.open(s,t.cp.l10n.shareGoogle,"width=401,height=437,left="+n+",top="+r),!1)))},e.prototype.totalScores=function(e){if(void 0===e)return{totalScore:0,totalMaxScore:0,totalPercentage:0};var t,i=0,s=0;for(t=0;t<e.length;t+=1)i+=e[t].score,s+=e[t].maxScore;var n=Math.round(i/s*100);return isNaN(n)&&(n=0),{totalScore:i,totalMaxScore:s,totalPercentage:n}},e.prototype.toggleSolutionMode=function(e){if(this.cp.isSolutionMode=e,e){var t=this.cp.showSolutions();this.cp.setProgressBarFeedback(t),this.cp.$footer.addClass("h5p-footer-solution-mode"),this.setFooterSolutionModeText(this.cp.l10n.solutionModeText)}else this.cp.$footer.removeClass("h5p-footer-solution-mode"),this.setFooterSolutionModeText(),this.cp.setProgressBarFeedback()},e.prototype.setFooterSolutionModeText=function(e){void 0!==e&&e?this.cp.$exitSolutionModeText.html(e):this.cp.$exitSolutionModeText&&this.cp.$exitSolutionModeText.html("")},e}(),b=g,y=function(e){let t=0;function i(){}return i.supported=function(){return"function"==typeof window.print},i.print=function(t,i,s){t.trigger("printing",{finished:!1,allSlides:s});var n=e(".h5p-slide.h5p-current"),r=n.height(),o=n.width()/670,a=e(".h5p-slide");a.css({height:r/o+"px",width:"670px",fontSize:Math.floor(100/o)+"%"}),e(".h5p-summary-slide").css({height:""});var l=i.height();i.css("height","auto"),a.toggleClass("doprint",!0===s),n.addClass("doprint"),setTimeout((function(){window.print(),a.css({height:"",width:"",fontSize:""}),i.css("height",l+"px"),t.trigger("printing",{finished:!0})}),500)},i.showDialog=function(i,s,n){var r=this;const o=t++,a=`h5p-cp-print-dialog-${o}-title`,l=`h5p-cp-print-dialog-${o}-ingress`;var d=e(`<div class="h5p-popup-dialog h5p-print-dialog">\n                      <div role="dialog" aria-labelledby="${a}" aria-describedby="${l}" tabindex="-1" class="h5p-inner">\n                        <h2 id="${a}">${i.printTitle}</h2>\n                        <div class="h5p-scroll-content"></div>\n                        <div class="h5p-close" role="button" tabindex="0" title="${H5P.t("close")}">\n                      </div>\n                    </div>`).insertAfter(s).click((function(){r.close()})).children(".h5p-inner").click((function(){return!1})).end();f(d.find(".h5p-close"),(()=>r.close()));var h=d.find(".h5p-scroll-content");return h.append(e("<div>",{class:"h5p-cp-print-ingress",id:l,html:i.printIngress})),H5P.JoubelUI.createButton({html:i.printAllSlides,class:"h5p-cp-print-all-slides",click:function(){r.close(),n(!0)}}).appendTo(h),H5P.JoubelUI.createButton({html:i.printCurrentSlide,class:"h5p-cp-print-current-slide",click:function(){r.close(),n(!1)}}).appendTo(h),this.open=function(){setTimeout((function(){d.addClass("h5p-open"),H5P.jQuery(r).trigger("dialog-opened",[d])}),1)},this.close=function(){d.removeClass("h5p-open"),setTimeout((function(){d.remove()}),200)},this.open(),d},i}(H5P.jQuery),S=y,w=function(e){const t=e.length;return function i(){const s=Array.prototype.slice.call(arguments,0);return s.length>=t?e.apply(null,s):function(){const e=Array.prototype.slice.call(arguments,0);return i.apply(null,s.concat(e))}}},x=w((function(e,t){t.forEach(e)})),T=(w((function(e,t){return t.map(e)})),w((function(e,t){return t.filter(e)}))),k=(w((function(e,t){return t.some(e)})),w((function(e,t){return-1!=t.indexOf(e)}))),C=w((function(e,t){return T((t=>!k(t,e)),t)})),E=w(((e,t)=>t.getAttribute(e))),$=w(((e,t,i)=>i.setAttribute(e,t))),P=w(((e,t)=>t.removeAttribute(e))),I=w(((e,t)=>t.hasAttribute(e))),A=(w(((e,t,i)=>i.getAttribute(e)===t)),w(((e,t)=>{const i=E(e,t);$(e,("true"!==i).toString(),t)})),w(((e,t)=>e.appendChild(t))),w(((e,t)=>t.querySelector(e))),w(((e,t)=>{return i=t.querySelectorAll(e),Array.prototype.slice.call(i);var i})),w(((e,t)=>e.removeChild(t))),w(((e,t)=>t.classList.contains(e))),w(((e,t)=>t.classList.add(e)))),B=w(((e,t)=>t.classList.remove(e))),H=A("hidden"),M=B("hidden"),L=(w(((e,t)=>(e?M:H)(t))),w(((e,t,i)=>{i.classList[t?"add":"remove"](e)})),P("tabindex")),K=(x(L),$("tabindex","0")),D=$("tabindex","-1"),F=I("tabindex");class j{constructor(e){Object.assign(this,{listeners:{},on:function(e,t,i){const s={listener:t,scope:i};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(s),this},fire:function(e,t){return(this.listeners[e]||[]).every((function(e){return!1!==e.listener.call(e.scope||this,t)}))},propagate:function(e,t){let i=this;e.forEach((e=>t.on(e,(t=>i.fire(e,t)))))}}),this.plugins=e||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.on("firstElement",this.firstElement,this),this.on("lastElement",this.lastElement,this),this.initPlugins()}addElement(e){this.elements.push(e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}insertElementAt(e,t){this.elements.splice(t,0,e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}removeElement(e){this.elements=C([e],this.elements),F(e)&&(this.setUntabbable(e),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",e)}count(){return this.elements.length}firesEvent(e,t){const i=this.elements.indexOf(t);return this.fire(e,{element:t,index:i,elements:this.elements,oldElement:this.tabbableElement})}nextElement({index:e}){const t=e===this.elements.length-1,i=this.elements[t?0:e+1];this.setTabbable(i),i.focus()}firstElement(){const e=this.elements[0];this.setTabbable(e),e.focus()}lastElement(){const e=this.elements[this.elements.length-1];this.setTabbable(e),e.focus()}setTabbableByIndex(e){const t=this.elements[e];t&&this.setTabbable(t)}setTabbable(e){x(this.setUntabbable.bind(this),this.elements),K(e),this.tabbableElement=e}setUntabbable(e){e!==document.activeElement&&(this.negativeTabIndexAllowed?D(e):L(e))}previousElement({index:e}){const t=0===e,i=this.elements[t?this.elements.length-1:e-1];this.setTabbable(i),i.focus()}useNegativeTabIndex(){this.negativeTabIndexAllowed=!0,this.elements.forEach((e=>{e.hasAttribute("tabindex")||D(e)}))}initPlugins(){this.plugins.forEach((function(e){void 0!==e.init&&e.init(this)}),this)}}class W{constructor(){this.selectability=!0}init(e){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=e,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}listenForKeyDown({element:e}){e.addEventListener("keydown",this.boundHandleKeyDown)}removeKeyDownListener({element:e}){e.removeEventListener("keydown",this.boundHandleKeyDown)}handleKeyDown(e){switch(e.which){case 27:this.close(e.target),e.preventDefault(),e.stopPropagation();break;case 35:this.lastElement(e.target),e.preventDefault(),e.stopPropagation();break;case 36:this.firstElement(e.target),e.preventDefault(),e.stopPropagation();break;case 13:case 32:this.select(e.target),e.preventDefault(),e.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(e)||(this.previousElement(e.target),e.preventDefault(),e.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(e)||(this.nextElement(e.target),e.preventDefault(),e.stopPropagation())}}hasChromevoxModifiers(e){return e.shiftKey||e.ctrlKey}previousElement(e){!1!==this.controls.firesEvent("beforePreviousElement",e)&&(this.controls.firesEvent("previousElement",e),this.controls.firesEvent("afterPreviousElement",e))}nextElement(e){!1!==this.controls.firesEvent("beforeNextElement",e)&&(this.controls.firesEvent("nextElement",e),this.controls.firesEvent("afterNextElement",e))}select(e){this.selectability&&!1!==this.controls.firesEvent("before-select",e)&&(this.controls.firesEvent("select",e),this.controls.firesEvent("after-select",e))}firstElement(e){!1!==this.controls.firesEvent("beforeFirstElement",e)&&(this.controls.firesEvent("firstElement",e),this.controls.firesEvent("afterFirstElement",e))}lastElement(e){!1!==this.controls.firesEvent("beforeLastElement",e)&&(this.controls.firesEvent("lastElement",e),this.controls.firesEvent("afterLastElement",e))}disableSelectability(){this.selectability=!1}enableSelectability(){this.selectability=!0}close(e){!1!==this.controls.firesEvent("before-close",e)&&(this.controls.firesEvent("close",e),this.controls.firesEvent("after-close",e))}}const O="none",N="not-answered",z="answered",R="has-only-correct",Q="has-incorrect",U=function(e){function t(e){this.cp=e,this.answeredLabels={[N]:this.cp.l10n.containsNotCompleted+".",[z]:this.cp.l10n.containsCompleted+".",[R]:this.cp.l10n.containsOnlyCorrect+".",[Q]:this.cp.l10n.containsIncorrectAnswers+".",[O]:""},this.initProgressbar(this.cp.slidesWithSolutions),this.initFooter(),this.initTaskAnsweredListener(),this.toggleNextAndPreviousButtonDisabled(this.cp.getCurrentSlideIndex())}return t.prototype.initTaskAnsweredListener=function(){this.cp.elementInstances.forEach(((e,t)=>{e.filter((e=>a(e.on))).forEach((e=>{e.on("xAPI",(e=>{const i=e.getVerb();if(h(["interacted","answered","attempted"],i)){const e=this.cp.slideHasAnsweredTask(t);this.setTaskAnswered(t,e)}else"completed"===i&&e.setVerb("answered");void 0===e.data.statement.context.extensions&&(e.data.statement.context.extensions={}),e.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]=t+1}))}))}))},t.prototype.initProgressbar=function(t){const i=this,s=i.cp.previousState&&i.cp.previousState.progress||0;this.progresbarKeyboardControls=new j([new W]),this.progresbarKeyboardControls.negativeTabIndexAllowed=!0,this.progresbarKeyboardControls.on("select",(t=>{i.displaySlide(e(t.element).data("slideNumber"))})),this.progresbarKeyboardControls.on("beforeNextElement",(e=>e.index!==e.elements.length-1)),this.progresbarKeyboardControls.on("beforePreviousElement",(e=>0!==e.index)),void 0!==this.cp.progressbarParts&&this.cp.progressbarParts&&this.cp.progressbarParts.forEach((function(e){i.progresbarKeyboardControls.removeElement(e.children("a").get(0)),e.remove()})),i.cp.progressbarParts=[];const n=function(t){t.preventDefault();const s=e(this).data("slideNumber");i.progresbarKeyboardControls.setTabbableByIndex(s),i.displaySlide(s),i.cp.focus()};for(let a=0;a<this.cp.slides.length;a+=1){const l=this.cp.slides[a],h=this.createSlideTitle(a),c=e("<div>",{class:"h5p-progressbar-part",id:"progressbar-part-"+a,role:"tab","aria-label":h,"aria-controls":"slide-"+a,"aria-selected":!1}).appendTo(i.cp.$progressbar),p=e("<a>",{href:"#",html:'<span class="h5p-progressbar-part-title hidden-but-read">'+h+"</span>",tabindex:"-1"}).data("slideNumber",a).click(n).appendTo(c);if(this.progresbarKeyboardControls.addElement(p.get(0)),this.isSummarySlide(a)&&c.addClass("progressbar-part-summary-slide"),d||H5P.Tooltip(c.get(0),{position:"top"}),0===a&&c.addClass("h5p-progressbar-part-show"),a===s&&c.addClass("h5p-progressbar-part-selected").attr("aria-selected",!0),i.cp.progressbarParts.push(c),this.updateSlideTitle(a),this.cp.slides.length<=60&&l.elements&&l.elements.length>0){var r=t[a]&&t[a].length>0,o=!!(i.cp.previousState&&i.cp.previousState.answered&&i.cp.previousState.answered[a]);r&&(e("<div>",{class:"h5p-progressbar-part-has-task"}).appendTo(p),this.setTaskAnswered(a,o))}}},t.prototype.displaySlide=function(e){const t=this;this.cp.jumpToSlide(e,!1,(function(){const i=t.cp.getCurrentSlideIndex();t.updateSlideTitle(e,{isCurrent:!0}),t.updateSlideTitle(i,{isCurrent:!1}),t.toggleNextAndPreviousButtonDisabled(e),t.cp.focus()}))},t.prototype.createSlideTitle=function(e){const t=this.cp.slides[e];return t.keywords&&t.keywords.length>0?t.keywords[0].main:this.isSummarySlide(e)?this.cp.l10n.summary:this.cp.l10n.slide+" "+(e+1)},t.prototype.isSummarySlide=function(e){return!(void 0!==this.cp.editor||e!==this.cp.slides.length-1||!this.cp.showSummarySlide)},t.prototype.initFooter=function(){var t=this,i=this.cp.$footer,s=e("<div/>",{class:"h5p-footer-left-adjusted"}).appendTo(i),n=e("<div/>",{class:"h5p-footer-center-adjusted"}).appendTo(i),r=e("<div/>",{role:"toolbar",class:"h5p-footer-right-adjusted"}).appendTo(i);this.cp.$keywordsButton=e("<div/>",{class:"h5p-footer-button h5p-footer-toggle-keywords","aria-expanded":"false","aria-label":this.cp.l10n.showKeywords,role:"button",tabindex:"0",html:'<span class="h5p-icon-menu"></span><span class="current-slide-title"></span>'}).appendTo(s),H5P.Tooltip(this.cp.$keywordsButton.get(0)),f(this.cp.$keywordsButton,(e=>{t.cp.presentation.keywordListAlwaysShow||(t.cp.toggleKeywords(),e.stopPropagation())})),!this.cp.presentation.keywordListAlwaysShow&&this.cp.initKeywords||this.cp.$keywordsButton.hide(),this.cp.presentation.keywordListEnabled||this.cp.$keywordsWrapper.add(this.$keywordsButton).hide(),this.updateFooterKeyword(0),this.cp.$prevSlideButton=e("<div/>",{class:"h5p-footer-button h5p-footer-previous-slide","aria-label":this.cp.l10n.prevSlide,role:"button",tabindex:"-1","aria-disabled":"true"}).appendTo(n),new H5P.Tooltip(this.cp.$prevSlideButton.get(0),{position:"left"}),f(this.cp.$prevSlideButton,(()=>this.cp.previousSlide(void 0,!1)));const o=e("<div/>",{class:"h5p-footer-slide-count"}).appendTo(n);this.cp.$footerCurrentSlide=e("<div/>",{html:"1",class:"h5p-footer-slide-count-current",title:this.cp.l10n.currentSlide,"aria-hidden":"true"}).appendTo(o),this.cp.$footerCounter=e("<div/>",{class:"hidden-but-read",html:this.cp.l10n.slideCount.replace("@index","1").replace("@total",this.cp.slides.length.toString())}).appendTo(n),e("<div/>",{html:"/",class:"h5p-footer-slide-count-delimiter","aria-hidden":"true"}).appendTo(o),this.cp.$footerMaxSlide=e("<div/>",{html:this.cp.slides.length,class:"h5p-footer-slide-count-max",title:this.cp.l10n.lastSlide,"aria-hidden":"true"}).appendTo(o),this.cp.$nextSlideButton=e("<div/>",{class:"h5p-footer-button h5p-footer-next-slide","aria-label":this.cp.l10n.nextSlide,role:"button",tabindex:"0"}).appendTo(n),H5P.Tooltip(this.cp.$nextSlideButton.get(0),{position:"right"}),f(this.cp.$nextSlideButton,(()=>this.cp.nextSlide(void 0,!1))),void 0===this.cp.editor&&(this.cp.$exitSolutionModeButton=e("<div/>",{role:"button",class:"h5p-footer-exit-solution-mode","aria-label":this.cp.l10n.solutionModeTitle,tabindex:"0"}).appendTo(r),H5P.Tooltip(this.cp.$exitSolutionModeButton.get(0)),f(this.cp.$exitSolutionModeButton,(()=>t.cp.jumpToSlide(t.cp.slides.length-1))),this.cp.enablePrintButton&&S.supported()&&(this.cp.$printButton=e("<div/>",{class:"h5p-footer-button h5p-footer-print","aria-label":this.cp.l10n.printTitle,role:"button",tabindex:"0"}).appendTo(r),H5P.Tooltip(this.cp.$printButton.get(0)),f(this.cp.$printButton,(()=>t.openPrintDialog()))),H5P.fullscreenSupported&&(this.cp.$fullScreenButton=e("<div/>",{class:"h5p-footer-button h5p-footer-toggle-full-screen","aria-label":this.cp.l10n.fullscreen,role:"button",tabindex:"0"}),H5P.Tooltip(this.cp.$fullScreenButton.get(0),{position:"left"}),f(this.cp.$fullScreenButton,(()=>t.cp.toggleFullScreen())),this.cp.$fullScreenButton.appendTo(r))),this.cp.$exitSolutionModeText=e("<div/>",{html:"",class:"h5p-footer-exit-solution-mode-text"}).appendTo(this.cp.$exitSolutionModeButton)},t.prototype.openPrintDialog=function(){const t=e(".h5p-wrapper");S.showDialog(this.cp.l10n,t,(e=>{S.print(this.cp,t,e)})).children('[role="dialog"]').focus()},t.prototype.updateProgressBar=function(e,t,i){var s,n=this;for(s=0;s<n.cp.progressbarParts.length;s+=1)e+1>s?n.cp.progressbarParts[s].addClass("h5p-progressbar-part-show"):n.cp.progressbarParts[s].removeClass("h5p-progressbar-part-show");n.progresbarKeyboardControls.setTabbableByIndex(e),n.cp.progressbarParts[e].addClass("h5p-progressbar-part-selected").attr("aria-selected",!0).siblings().removeClass("h5p-progressbar-part-selected").attr("aria-selected",!1),void 0!==t?!i&&n.cp.editor:n.cp.progressbarParts.forEach((function(e,t){n.setTaskAnswered(t,!1)}))},t.prototype.setTaskAnswered=function(e,t){this.cp.progressbarParts[e].find(".h5p-progressbar-part-has-task").toggleClass("h5p-answered",t),this.updateSlideTitle(e,{state:t?z:N})},t.prototype.updateSlideTitle=function(e,{state:t}={}){this.setSlideTitle(e,{state:c(t,this.getAnsweredState(e))})},t.prototype.setSlideTitle=function(e,{state:t=O}){const i=this.cp.progressbarParts[e].find(".h5p-progressbar-part-title"),s=this.answeredLabels[t].replace("@slideName",this.createSlideTitle(e));i.html(`${s}`)},t.prototype.getAnsweredState=function(e){const t=this.cp.progressbarParts[e],i=this.slideHasInteraction(e),s=this.cp.slideHasAnsweredTask(e);return i?t.find(".h5p-is-correct").length>0?R:t.find(".h5p-is-wrong").length>0?Q:s?z:N:O},t.prototype.slideHasInteraction=function(e){return this.cp.progressbarParts[e].find(".h5p-progressbar-part-has-task").length>0},t.prototype.updateFooter=function(e){this.cp.$footerCurrentSlide.html(e+1),this.cp.$footerMaxSlide.html(this.cp.slides.length),this.cp.$footerCounter.html(this.cp.l10n.slideCount.replace("@index",(e+1).toString()).replace("@total",this.cp.slides.length.toString())),this.cp.isSolutionMode&&e===this.cp.slides.length-1?this.cp.$footer.addClass("summary-slide"):this.cp.$footer.removeClass("summary-slide"),this.toggleNextAndPreviousButtonDisabled(e),this.updateFooterKeyword(e)},t.prototype.toggleNextAndPreviousButtonDisabled=function(e){const t=this.cp.slides.length-1;this.cp.$prevSlideButton.attr("aria-disabled",(0===e).toString()),this.cp.$nextSlideButton.attr("aria-disabled",(e===t).toString()),this.cp.$prevSlideButton.attr("tabindex",0===e?"-1":"0"),this.cp.$nextSlideButton.attr("tabindex",e===t?"-1":"0")},t.prototype.updateFooterKeyword=function(e){const t=this.cp.slides[e];let i="";t&&t.keywords&&t.keywords[0]&&(i=t.keywords[0].main),!this.cp.isEditor()&&this.cp.showSummarySlide&&e>=this.cp.slides.length-1&&(i=this.cp.l10n.summary),this.cp.$keywordsButton.children(".current-slide-title").html(c(i,""))},t}(H5P.jQuery),G=U;class q{constructor(e){var t=e.presentation;t=s.extend(!0,{globalBackgroundSelector:{fillGlobalBackground:"",imageGlobalBackground:{}},slides:[{slideBackgroundSelector:{fillSlideBackground:"",imageSlideBackground:{}}}]},t);var i,n=function(t,i,s){var n=e.$slidesWrapper.children().filter(":not(.h5p-summary-slide)");void 0!==s&&(n=n.eq(s)),t&&""!==t?n.addClass("has-background").css("background-image","").css("background-color",t):i&&i.path&&n.addClass("has-background").css("background-color","").css("background-image","url("+H5P.getPath(i.path,e.contentId)+")")};i=t.globalBackgroundSelector,n(i.fillGlobalBackground,i.imageGlobalBackground),t.slides.forEach((function(e,t){var i=e.slideBackgroundSelector;i&&n(i.fillSlideBackground,i.imageSlideBackground,t)}))}}const X=e=>parseInt(e.dataset.index);class J{constructor({l10n:e,currentIndex:t}){this.l10n=e,this.state={currentIndex:c(t,0)},this.eventDispatcher=new n,this.controls=new j([new W]),this.controls.on("select",(e=>{this.onMenuItemSelect(X(e.element))})),this.controls.on("close",(()=>this.eventDispatcher.trigger("close"))),this.menuElement=this.createMenuElement(),this.currentSlideMarkerElement=this.createCurrentSlideMarkerElement()}init(e){return this.menuItemElements=e.map((e=>this.createMenuItemElement(e))),this.menuItemElements.forEach((e=>this.menuElement.appendChild(e))),this.menuItemElements.forEach((e=>this.controls.addElement(e))),this.setCurrentSlideIndex(this.state.currentIndex),this.menuItemElements}on(e,t){this.eventDispatcher.on(e,t)}getElement(){return this.menuElement}removeAllMenuItemElements(){this.menuItemElements.forEach((e=>{this.controls.removeElement(e),this.menuElement.removeChild(e)})),this.menuItemElements=[]}createMenuElement(){const e=this.menuElement=document.createElement("ol");return e.setAttribute("role","menu"),e.classList.add("list-unstyled"),e}createMenuItemElement(e){const t=document.createElement("li");return t.setAttribute("role","menuitem"),t.addEventListener("click",(e=>{this.onMenuItemSelect(X(e.currentTarget))})),this.applyConfigToMenuItemElement(t,e),t}applyConfigToMenuItemElement(e,t){e.innerHTML=`<div class="h5p-keyword-subtitle">${t.subtitle}</div><span class="h5p-keyword-title">${t.title}</span>`,e.dataset.index=t.index}onMenuItemSelect(e){this.setCurrentSlideIndex(e),this.eventDispatcher.trigger("select",{index:e})}setCurrentSlideIndex(e){const t=this.getElementByIndex(this.menuItemElements,e);t&&(this.state.currentIndex=e,this.updateCurrentlySelected(this.menuItemElements,this.state),this.controls.setTabbable(t))}updateCurrentlySelected(e,t){e.forEach((e=>{const i=t.currentIndex===X(e);e.classList.toggle("h5p-current",i),i&&e.appendChild(this.currentSlideMarkerElement)}))}scrollToKeywords(e){const t=this.getFirstElementAfter(e);if(t){const e=s(this.menuElement),i=e.scrollTop()+s(t).position().top-8;l?e.scrollTop(i):e.stop().animate({scrollTop:i},250)}}getFirstElementAfter(e){return this.menuItemElements.filter((t=>X(t)>=e))[0]}getElementByIndex(e,t){return e.filter((e=>X(e)===t))[0]}createCurrentSlideMarkerElement(){const e=document.createElement("div");return e.classList.add("hidden-but-read"),e.innerHTML=this.l10n.currentSlide,e}}const V="specified",Y="next",_="previous";class Z{constructor({title:e,goToSlide:t=1,invisible:i,goToSlideType:r=V},{l10n:o,currentIndex:a}){this.eventDispatcher=new n;let l="h5p-press-to-go",d=0;if(i)e=void 0,d=-1;else{if(!e)switch(r){case V:e=o.goToSlide.replace(":num",t.toString());break;case Y:e=o.goToSlide.replace(":num",o.nextSlide);break;case _:e=o.goToSlide.replace(":num",o.prevSlide)}l+=" h5p-visible"}let h=t-1;r===Y?h=a+1:r===_&&(h=a-1),this.$element=s("<a/>",{href:"#",class:l,tabindex:d,title:e}),f(this.$element,(e=>{const t=document.querySelector('[aria-roledescription="carousel"]');this.eventDispatcher.trigger("navigate",h),t.focus(),e.preventDefault()}))}attach(e){e.html("").addClass("h5p-go-to-slide").append(this.$element)}on(e,t){this.eventDispatcher.on(e,t)}}const ee=function(e){const t=this;if(void 0===e.action)t.instance=new Z(e,{l10n:t.parent.parent.l10n,currentIndex:t.parent.index}),t.parent.parent.isEditor()||t.instance.on("navigate",(e=>{const i=e.data;t.parent.parent.jumpToSlide(i)}));else{var i;i=t.parent.parent.isEditor()?H5P.jQuery.extend(!0,{},e.action,t.parent.parent.elementsOverride):H5P.jQuery.extend(!0,e.action,t.parent.parent.elementsOverride);var s=t.parent.parent.elementInstances[t.parent.index]?t.parent.parent.elementInstances[t.parent.index].length:0;t.parent.parent.previousState&&t.parent.parent.previousState.answers&&t.parent.parent.previousState.answers[t.parent.index]&&t.parent.parent.previousState.answers[t.parent.index][s]&&(i.userDatas={state:t.parent.parent.previousState.answers[t.parent.index][s]}),i.params=i.params||{},t.instance=H5P.newRunnable(i,t.parent.parent.contentId,void 0,!0,{parent:t.parent.parent}),void 0!==t.instance.preventResize&&(t.instance.preventResize=!0)}void 0===t.parent.parent.elementInstances[t.parent.index]?t.parent.parent.elementInstances[t.parent.index]=[t.instance]:t.parent.parent.elementInstances[t.parent.index].push(t.instance),void 0!==t.instance.showCPComments||t.instance.isTask||void 0===t.instance.isTask&&void 0!==t.instance.showSolutions?(t.instance.coursePresentationIndexOnSlide=t.parent.parent.elementInstances[t.parent.index].length-1,void 0===t.parent.parent.slidesWithSolutions[t.parent.index]&&(t.parent.parent.slidesWithSolutions[t.parent.index]=[]),t.parent.parent.slidesWithSolutions[t.parent.index].push(t.instance)):e.solution&&(void 0===t.parent.parent.showCommentsAfterSolution[t.parent.index]&&(t.parent.parent.showCommentsAfterSolution[t.parent.index]=[]),t.parent.parent.showCommentsAfterSolution[t.parent.index].push(t.instance)),void 0!==t.instance.exportAnswers&&t.instance.exportAnswers&&(t.parent.parent.hasAnswerElements=!0),t.parent.parent.isTask||t.parent.parent.hideSummarySlide||(t.instance.isTask||void 0===t.instance.isTask&&void 0!==t.instance.showSolutions)&&(t.parent.parent.isTask=!0)};function te(e){const i=this;let s;t().call(i,ee,e.elements),i.getElement=function(){return s||(s=H5P.jQuery(te.createHTML({...e,index:i.index}))),s},i.setCurrent=function(){this.parent.$current=s.addClass("h5p-current")},i.appendElements=function(){for(let t=0;t<i.children.length;t++)i.parent.attachElement(e.elements[t],i.children[t].instance,s,i.index);i.parent.elementsAttached[i.index]=!0,i.parent.trigger("domChanged",{$target:s,library:"CoursePresentation",key:"newSlide"},{bubbles:!0,external:!0})}}te.createHTML=function(e){return'<div role="tabpanel" id="slide-'+e.index+'" aria-labelledby="progressbar-part-'+e.index+'" class="h5p-slide"> <div role="document" tabindex="0" '+(void 0!==e.background?' style="background:'+e.background+'"':"")+"></div></div>"};const ie=te,se=function(e,t){const i=new H5P.ConfirmationDialog(e).appendTo(document.body);return i.getElement().classList.add("h5p-cp-confirmation-dialog"),i.show(),i};let ne=function(e,i,n){var r=this;this.presentation=e.presentation,this.slides=this.presentation.slides,this.contentId=i,this.elementInstances=[],this.elementsAttached=[],this.slidesWithSolutions=[],this.showCommentsAfterSolution=[],this.hasAnswerElements=!1,this.ignoreResize=!1,this.isTask=!1,this.standalone=!0,this.isReportingEnabled=!1,this.popups={},n.cpEditor&&(this.editor=n.cpEditor),n&&(this.previousState=n.previousState,this.standalone=n.standalone,this.isReportingEnabled=n.isReportingEnabled||n.isScoringEnabled),this.currentSlideIndex=this.previousState&&this.previousState.progress?this.previousState.progress:0,this.presentation.keywordListEnabled=void 0===e.presentation.keywordListEnabled||e.presentation.keywordListEnabled,this.l10n=s.extend({slide:"Slide",score:"Score",yourScore:"Your score",maxScore:"Max score",total:"Total",totalScore:"Total Score",showSolutions:"Show solutions",summary:"summary",retry:"Retry",exportAnswers:"Export text",close:"Close",hideKeywords:"Hide sidebar navigation menu",showKeywords:"Show sidebar navigation menu",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",prevSlide:"Previous slide",nextSlide:"Next slide",currentSlide:"Current slide",lastSlide:"Last slide",solutionModeTitle:"Exit solution mode",solutionModeText:"Solution Mode",summaryMultipleTaskText:"Multiple tasks",scoreMessage:"You achieved:",shareFacebook:"Share on Facebook",shareTwitter:"Share on Twitter",shareGoogle:"Share on Google+",goToSlide:"Go to slide :num",solutionsButtonTitle:"Show comments",printTitle:"Print",printIngress:"How would you like to print this presentation?",printAllSlides:"Print all slides",printCurrentSlide:"Print current slide",noTitle:"No title",accessibilitySlideNavigationExplanation:"Use left and right arrow to change slide in that direction whenever canvas is selected.",accessibilityProgressBarLabel:"Choose slide to display",containsNotCompleted:"@slideName contains not completed interaction",containsCompleted:"@slideName contains completed interaction",slideCount:"Slide @index of @total",accessibilityCanvasLabel:"Presentation canvas. Use left and right arrow to move between slides.",containsOnlyCorrect:"@slideName only has correct answers",containsIncorrectAnswers:"@slideName has incorrect answers",shareResult:"Share Result",accessibilityTotalScore:"You got @score of @maxScore points in total",accessibilityEnteredFullscreen:"Entered fullscreen",accessibilityExitedFullscreen:"Exited fullscreen",confirmDialogHeader:"Submit your answers",confirmDialogText:"This will submit your results, do you want to continue?",confirmDialogConfirmText:"Submit and see results",slideshowNavigationLabel:"Slideshow navigation"},void 0!==e.l10n?e.l10n:{}),e.override&&(this.activeSurface=!!e.override.activeSurface,this.hideSummarySlide=!!e.override.hideSummarySlide,this.enablePrintButton=!!e.override.enablePrintButton,this.showSummarySlideSolutionButton=void 0===e.override.summarySlideSolutionButton||e.override.summarySlideSolutionButton,this.showSummarySlideRetryButton=void 0===e.override.summarySlideRetryButton||e.override.summarySlideRetryButton,e.override.social&&(this.enableTwitterShare=!!e.override.social.showTwitterShare,this.enableFacebookShare=!!e.override.social.showFacebookShare,this.enableGoogleShare=!!e.override.social.showGoogleShare,this.twitterShareStatement=e.override.social.twitterShare.statement,this.twitterShareHashtags=e.override.social.twitterShare.hashtags,this.twitterShareUrl=e.override.social.twitterShare.url,this.facebookShareUrl=e.override.social.facebookShare.url,this.facebookShareQuote=e.override.social.facebookShare.quote,this.googleShareUrl=e.override.social.googleShareUrl)),this.keywordMenu=new J({l10n:this.l10n,currentIndex:void 0!==this.previousState?this.previousState.progress:0}),this.setElementsOverride(e.override),t().call(this,ie,e.presentation.slides),this.on("resize",this.resize,this),this.on("printing",(function(e){r.ignoreResize=!e.data.finished,e.data.finished?r.resize():e.data.allSlides&&r.attachAllElements()}))};(ne.prototype=Object.create(t().prototype)).constructor=ne,ne.prototype.getCurrentState=function(){var e=this.previousState?this.previousState:{};e.progress=this.getCurrentSlideIndex()||null,e.answers||(e.answers=[]),e.answered=this.elementInstances.map(((e,t)=>this.slideHasAnsweredTask(t)||null));for(var t=0;t<this.elementInstances.length;t++)if(this.elementInstances[t])for(var i=0;i<this.elementInstances[t].length;i++){var s=this.elementInstances[t][i];(s.getCurrentState instanceof Function||"function"==typeof s.getCurrentState)&&(e.answers[t]||(e.answers[t]=[]),e.answers[t][i]=s.getCurrentState())}return e},ne.prototype.slideHasAnsweredTask=function(e){return(this.slidesWithSolutions[e]||[]).filter((e=>a(e.getAnswerGiven))).some((e=>e.getAnswerGiven()&&!H5P.isEmpty(e.getCurrentState())))},ne.prototype.attach=function(e){var t=this;void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted();var i='<div class="h5p-keymap-explanation hidden-but-read">'+(!this.activeSurface&&this.l10n.accessibilitySlideNavigationExplanation)+'</div><div class="h5p-fullscreen-announcer hidden-but-read" aria-live="polite"></div><div class="h5p-wrapper" tabindex="0" role="region" aria-roledescription="carousel" aria-label="'+(!this.activeSurface&&this.l10n.accessibilityCanvasLabel)+'">  <div class="h5p-current-slide-announcer hidden-but-read" aria-live="polite"></div>  <div tabindex="-1"></div>  <div class="h5p-box-wrapper">    <div class="h5p-presentation-wrapper">      <div class="h5p-keywords-wrapper"></div>     <div class="h5p-slides-wrapper"></div>    </div>  </div>  <nav class="h5p-cp-navigation" aria-label="'+this.l10n.slideshowNavigationLabel+'">    <div class="h5p-progressbar" role="tablist" aria-label="'+this.l10n.accessibilityProgressBarLabel+'"></div>  </nav>  <div class="h5p-footer"></div></div>';e.attr("role","application").addClass("h5p-course-presentation").html(i),this.$container=e,this.$slideAnnouncer=e.find(".h5p-current-slide-announcer"),this.$fullscreenAnnouncer=e.find(".h5p-fullscreen-announcer"),this.$slideTop=this.$slideAnnouncer.next(),this.$wrapper=e.children(".h5p-wrapper"),this.activeSurface&&this.$wrapper.addClass("h5p-course-presentation-active-surface"),this.$wrapper.focus((function(){t.initKeyEvents()})).blur((function(){void 0!==t.keydown&&(H5P.jQuery("body").unbind("keydown",t.keydown),delete t.keydown)})).click((function(e){var i=H5P.jQuery(e.target);const s=t.belongsToTagName(e.target,["input","textarea","a","button"],e.currentTarget),n=t.hasTabIndex(e.target,e.currentTarget),r=i.closest(".h5p-popup-container"),o=0!==r.length;if(!s&&!n&&!t.editor)if(o){const e=i.closest("[tabindex]");1===e.closest(".h5p-popup-container").length?e.focus():r.find(".h5p-close-popup").focus()}else t.$wrapper.focus();t.presentation.keywordListEnabled&&!t.presentation.keywordListAlwaysShow&&t.presentation.keywordListAutoHide&&!i.is("textarea, .h5p-icon-pencil, span")&&t.hideKeywords()})),this.on("exitFullScreen",(()=>{this.$footer.removeClass("footer-full-screen"),this.$fullScreenButton.attr("aria-label",this.l10n.fullscreen),this.$fullscreenAnnouncer.html(this.l10n.accessibilityExitedFullscreen)})),this.on("enterFullScreen",(()=>{this.$fullscreenAnnouncer.html(this.l10n.accessibilityEnteredFullscreen)}));var n=parseInt(this.$wrapper.css("width"));this.width=0!==n?n:640;var r=parseInt(this.$wrapper.css("height"));this.height=0!==r?r:400,this.ratio=16/9,this.fontSize=16,this.$boxWrapper=this.$wrapper.children(".h5p-box-wrapper");var o,a=this.$boxWrapper.children(".h5p-presentation-wrapper");if(this.$slidesWrapper=a.children(".h5p-slides-wrapper"),this.$keywordsWrapper=a.children(".h5p-keywords-wrapper"),this.$progressbar=this.$wrapper.find(".h5p-progressbar"),this.$footer=this.$wrapper.children(".h5p-footer"),this.initKeywords=void 0===this.presentation.keywordListEnabled||!0===this.presentation.keywordListEnabled||void 0!==this.editor,this.activeSurface&&void 0===this.editor&&(this.initKeywords=!1,this.$boxWrapper.css("height","100%")),this.isSolutionMode=!1,this.createSlides(),this.elementsAttached[this.currentSlideIndex]=!0,this.showSummarySlide=!1,this.hideSummarySlide?this.showSummarySlide=!this.hideSummarySlide:this.slidesWithSolutions.forEach((function(e){t.showSummarySlide=e.length})),void 0===this.editor&&(this.showSummarySlide||this.hasAnswerElements)){var l={elements:[],keywords:[]};this.slides.push(l),(o=H5P.jQuery(ie.createHTML(l)).appendTo(this.$slidesWrapper)).addClass("h5p-summary-slide"),this.isCurrentSlide(this.slides.length-1)&&(this.$current=o)}const d=this.getKeywordMenuConfig();d.length>0||this.isEditor()?(this.keywordMenu.init(d),this.keywordMenu.on("select",(e=>this.keywordClick(e.data.index))),this.keywordMenu.on("close",(()=>this.hideKeywords())),this.keywordMenu.on("select",(()=>{this.$currentKeyword=this.$keywords.children(".h5p-current")})),this.$keywords=s(this.keywordMenu.getElement()).appendTo(this.$keywordsWrapper),this.$currentKeyword=this.$keywords.children(".h5p-current"),void 0!==this.presentation.keywordListOpacity&&this.setKeywordsOpacity(this.presentation.keywordListOpacity),this.presentation.keywordListAlwaysShow&&this.showKeywords()):(this.$keywordsWrapper.remove(),this.initKeywords=!1),void 0===this.editor&&this.activeSurface?(this.$progressbar.add(this.$footer).remove(),H5P.fullscreenSupported&&(this.$fullScreenButton=H5P.jQuery("<div/>",{class:"h5p-toggle-full-screen","aria-label":this.l10n.fullscreen,role:"button",tabindex:0,appendTo:this.$wrapper}),H5P.Tooltip(this.$fullScreenButton.get(0),{position:"left"}),f(this.$fullScreenButton,(()=>t.toggleFullScreen())))):(this.initTouchEvents(),this.navigationLine=new G(this),this.previousState&&this.previousState.progress||this.setSlideNumberAnnouncer(0,!1),this.summarySlideObject=new b(this,o)),new q(this),this.previousState&&this.previousState.progress&&this.jumpToSlide(this.previousState.progress,!1,null,!1,!0)},ne.prototype.belongsToTagName=function(e,t,i){if(!e)return!1;i=i||document.body,"string"==typeof t&&(t=[t]),t=t.map((e=>e.toLowerCase()));const s=e.tagName.toLowerCase();return-1!==t.indexOf(s)||i!==e&&this.belongsToTagName(e.parentNode,t,i)},ne.prototype.hasTabIndex=(e,t)=>{if(-1!==e.tabIndex)return!0;const i=s(e).parents();for(let e in i){if(-1!==i[e].tabIndex)return!0;if(t&&i[e]===t)return!1}return!1},ne.prototype.updateKeywordMenuFromSlides=function(){this.keywordMenu.removeAllMenuItemElements();const e=this.getKeywordMenuConfig();return s(this.keywordMenu.init(e))},ne.prototype.getKeywordMenuConfig=function(){return this.slides.map(((e,t)=>({title:this.createSlideTitle(e),subtitle:`${this.l10n.slide} ${t+1}`,index:t}))).filter((e=>null!==e.title))},ne.prototype.createSlideTitle=function(e){const t=this.isEditor()?this.l10n.noTitle:null;return this.hasKeywords(e)?e.keywords[0].main:t},ne.prototype.isEditor=function(){return void 0!==this.editor},ne.prototype.hasKeywords=function(e){return void 0!==e.keywords&&e.keywords.length>0},ne.prototype.createSlides=function(){var e=this;for(let t=0;t<e.children.length;t++){const i=t===e.currentSlideIndex;e.children[t].getElement().appendTo(e.$slidesWrapper),i&&e.children[t].setCurrent(),(e.isEditor()||0===t||1===t||i)&&e.children[t].appendElements()}},ne.prototype.hasScoreData=function(e){return void 0!==e&&"function"==typeof e.getScore&&"function"==typeof e.getMaxScore},ne.prototype.getScore=function(){var e=this;return o(e.slidesWithSolutions).reduce((function(t,i){return t+(e.hasScoreData(i)?i.getScore():0)}),0)},ne.prototype.getMaxScore=function(){var e=this;return o(e.slidesWithSolutions).reduce((function(t,i){return t+(e.hasScoreData(i)?i.getMaxScore():0)}),0)},ne.prototype.setProgressBarFeedback=function(e){void 0!==e&&e?e.forEach((e=>{const t=this.progressbarParts[e.slide-1].find(".h5p-progressbar-part-has-task");if(t.hasClass("h5p-answered")){const i=e.score>=e.maxScore;t.addClass(i?"h5p-is-correct":"h5p-is-wrong"),this.navigationLine.updateSlideTitle(e.slide-1)}})):this.progressbarParts.forEach((e=>{e.find(".h5p-progressbar-part-has-task").removeClass("h5p-is-correct").removeClass("h5p-is-wrong")}))},ne.prototype.toggleKeywords=function(){this[this.$keywordsWrapper.hasClass("h5p-open")?"hideKeywords":"showKeywords"]()},ne.prototype.hideKeywords=function(){this.$keywordsWrapper.hasClass("h5p-open")&&(void 0!==this.$keywordsButton&&(this.$keywordsButton.attr("aria-label",this.l10n.showKeywords),this.$keywordsButton.attr("aria-expanded","false"),this.$keywordsButton.focus()),this.$keywordsWrapper.removeClass("h5p-open"))},ne.prototype.showKeywords=function(){this.$keywordsWrapper.hasClass("h5p-open")||(void 0!==this.$keywordsButton&&(this.$keywordsButton.attr("aria-label",this.l10n.hideKeywords),this.$keywordsButton.attr("aria-expanded","true")),this.$keywordsWrapper.addClass("h5p-open"),this.presentation.keywordListAlwaysShow||this.$keywordsWrapper.find('li[tabindex="0"]').focus())},ne.prototype.setKeywordsOpacity=function(e){if(""!==this.$keywordsWrapper.css("background-color")){const[t,i,s]=this.$keywordsWrapper.css("background-color").match(/\d+/g);this.$keywordsWrapper.css("background-color",`rgba(${t}, ${i}, ${s}, ${e/100})`)}},ne.prototype.fitCT=function(){void 0===this.editor&&this.$current.find(".h5p-ct").each((function(){for(var e=100,t=H5P.jQuery(this),i=t.parent().height();t.outerHeight()>i&&(e--,t.css({fontSize:e+"%",lineHeight:e+65+"%"}),!(e<0)););}))},ne.prototype.resize=function(){var e=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");if(!this.ignoreResize){this.$wrapper.css("width","auto");var t=this.$container.width(),i={};if(e){var s=this.$container.height();t/s>this.ratio&&(t=s*this.ratio,i.width=t+"px")}var n=t/this.width;i.height=t/this.ratio+"px",i.fontSize=this.fontSize*n+"px",void 0!==this.editor&&this.editor.setContainerEm(this.fontSize*n*.75),this.$wrapper.css(i),this.swipeThreshold=100*n;var r=this.elementInstances[this.$current.index()];if(void 0!==r)for(var o=this.slides[this.$current.index()].elements,a=0;a<r.length;a++){var l=r[a];void 0!==l.preventResize&&!1!==l.preventResize||void 0===l.$||o[a].displayAsButton||H5P.trigger(l,"resize")}this.fitCT()}},ne.prototype.toggleFullScreen=function(){H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():void 0===H5P.fullScreenBrowserPrefix?H5P.jQuery(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"]():(this.$footer.addClass("footer-full-screen"),this.$fullScreenButton.attr("aria-label",this.l10n.exitFullscreen),H5P.fullScreen(this.$container,this),void 0===H5P.fullScreenBrowserPrefix&&H5P.jQuery(".h5p-disable-fullscreen").hide())},ne.prototype.focus=function(){this.$wrapper.focus()},ne.prototype.keywordClick=function(e){this.shouldHideKeywordsAfterSelect()&&this.hideKeywords(),this.jumpToSlide(e,!0)},ne.prototype.shouldHideKeywordsAfterSelect=function(){return this.presentation.keywordListEnabled&&!this.presentation.keywordListAlwaysShow&&this.presentation.keywordListAutoHide&&void 0===this.editor},ne.prototype.setElementsOverride=function(e){this.elementsOverride={params:{}},e&&(this.elementsOverride.params.behaviour={},e.showSolutionButton&&(this.elementsOverride.params.behaviour.enableSolutionsButton="on"===e.showSolutionButton),e.retryButton&&(this.elementsOverride.params.behaviour.enableRetry="on"===e.retryButton))},ne.prototype.attachElements=function(e,t){if(void 0===this.elementsAttached[t]){var i=this.slides[t],s=this.elementInstances[t];if(void 0!==i.elements)for(var n=0;n<i.elements.length;n++)this.attachElement(i.elements[n],s[n],e,t);this.trigger("domChanged",{$target:e,library:"CoursePresentation",key:"newSlide"},{bubbles:!0,external:!0}),this.elementsAttached[t]=!0}},ne.prototype.attachElement=function(e,t,i,s){const n=void 0!==e.displayAsButton&&e.displayAsButton;var r=void 0!==e.buttonSize?"h5p-element-button-"+e.buttonSize:"",o="h5p-element"+(n?" h5p-element-button-wrapper":"")+(r.length?" "+r:""),a=H5P.jQuery("<div>",{class:o}).css({left:e.x+"%",top:e.y+"%",width:e.width+"%",height:e.height+"%"}).appendTo(i.children('[role="document"]').first());const l=void 0===e.backgroundOpacity||0===e.backgroundOpacity;if(a.toggleClass("h5p-transparent",l),n){this.createInteractionButton(e,t).appendTo(a)}else{const i=e.action&&e.action.library?this.getLibraryTypePmz(e.action.library):"other";var d=H5P.jQuery("<div>",{class:`h5p-element-outer ${i}-outer-element`}).css({background:"rgba(255,255,255,"+(void 0===e.backgroundOpacity?0:e.backgroundOpacity/100)+")"}).appendTo(a),h=H5P.jQuery("<div>",{class:"h5p-element-inner"}).appendTo(d);if(t.on("set-size",(function(e){for(let t in e.data)a.get(0).style[t]=e.data[t]})),t.attach(h),void 0!==e.action&&"H5P.InteractiveVideo"===e.action.library.substr(0,20)){var c=function(){t.$container.addClass("h5p-fullscreen"),t.controls.$fullscreen&&t.controls.$fullscreen.remove(),t.hasFullScreen=!0,t.controls.$play.hasClass("h5p-pause")?t.$controls.addClass("h5p-autohide"):t.enableAutoHide()};void 0!==t.controls?c():t.on("controls",c)}this.setOverflowTabIndex()}return void 0!==this.editor?this.editor.processElement(e,a,s,t):(e.solution&&this.addElementSolutionButton(e,t,a),this.hasAnswerElements=this.hasAnswerElements||void 0!==t.exportAnswers),a},ne.prototype.disableTabIndexes=function(){var e=this.$container.find(".h5p-popup-container");this.$tabbables=this.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter((function(){var t=s(this),i=s.contains(e.get(0),t.get(0));if(t.data("tabindex"))return!0;if(!i){var n=t.attr("tabindex");return t.data("tabindex",n),t.attr("tabindex","-1"),!0}return!1}))},ne.prototype.restoreTabIndexes=function(){this.$tabbables&&this.$tabbables.each((function(){var e=s(this),t=e.data("tabindex");e.hasClass("ui-slider-handle")?(e.attr("tabindex",0),e.removeData("tabindex")):void 0!==t?(e.attr("tabindex",t),e.removeData("tabindex")):e.removeAttr("tabindex")}))},ne.prototype.createInteractionButton=function(e,t){let i=e.action.metadata?e.action.metadata.title:"";""!==i&&void 0!==i||(i=e.action?.params?.contentName||e.action?.params?.title||e.action.library.split(" ")[0].split(".")[1]);const n=this.getLibraryTypePmz(e.action.library),r=s("<div>",{role:"button",tabindex:0,"aria-label":i,"aria-popup":!0,"aria-expanded":!1,class:`h5p-element-button h5p-element-button-${e.buttonSize} ${n}-button`}),o=s('<div class="h5p-button-element"></div>');t.attach(o);const a="h5p-advancedtext"===n?{x:e.x,y:e.y}:null;return f(r,(()=>{var e;r.attr("aria-expanded","true"),this.showInteractionPopup(t,r,o,n,(e=r,()=>e.attr("aria-expanded","false")),a)})),void 0!==e.action&&"H5P.InteractiveVideo"===e.action.library.substr(0,20)&&t.on("controls",(function(){t.controls.$fullscreen&&t.controls.$fullscreen.remove()})),r},ne.prototype.showInteractionPopup=function(e,t,i,s,n,r=null){const o=()=>{e.trigger("resize")};this.isEditor()||(this.on("exitFullScreen",o),this.showPopup({popupContent:i,$focusOnClose:t,parentPosition:r,remove:(e=!1)=>{e||i.detach(),this.off("exitFullScreen",o),n()},classes:s,instance:e,keepInDOM:"h5p-interactivevideo"===s}),H5P.trigger(e,"resize"),"h5p-image"===s&&this.resizePopupImage(i),setTimeout((()=>{var e=i.find(":input").add(i.find("[tabindex]"));e.length?e[0].focus():(i.attr("tabindex",0),i.focus())}),200),a(e.setActivityStarted)&&a(e.getScore)&&e.setActivityStarted())},ne.prototype.getLibraryTypePmz=e=>{return(t=e.split(" ")[0],t.replace(/[\W]/g,"-")).toLowerCase();var t},ne.prototype.resizePopupImage=function(e){var t=Number(e.css("fontSize").replace("px","")),i=e.find("img"),s=function(i,s){if(!(s/t<18.5)){var n=i/s;s=18.5*t,e.css({width:s*n,height:s})}};i.height()?s(i.width(),i.height()):i.one("load",(function(){s(this.width,this.height)}))},ne.prototype.addElementSolutionButton=function(e,t,i){t.showCPComments=()=>{if(0===i.children(".h5p-element-solution").length&&(t=e.solution,v.html(t).text().trim()).length>0){const t=s("<div/>",{role:"button",tabindex:0,title:this.l10n.solutionsButtonTitle,"aria-haspopup":"dialog","aria-expanded":!1,class:"h5p-element-solution"}).append('<span class="joubel-icon-comment-normal"><span class="h5p-icon-shadow"></span><span class="h5p-icon-speech-bubble"></span><span class="h5p-icon-question"></span></span>').appendTo(i),n={x:e.x,y:e.y};e.displayAsButton||(n.x+=e.width-4,n.y+=e.height-12),f(t,(i=>{this.showPopup({popupContent:e.solution,$focusOnClose:t,parentPosition:n,updateAriaExpanded:!0}),t.attr("aria-expanded",!0),i.stopPropagation()}))}var t},void 0!==e.alwaysDisplayComments&&e.alwaysDisplayComments&&t.showCPComments()},ne.prototype.showPopup=function({popupContent:e,$focusOnClose:t,parentPosition:i=null,remove:n,classes:r="h5p-popup-comment-field",instance:o,keepInDOM:a=!1,updateAriaExpanded:l}){var d,h=this;this.popupId=void 0===this.popupId?0:this.popupId+1;var c=function(e){d?d=!1:(h.restoreTabIndexes(),t.focus(),l&&t.attr("aria-expanded",!1),void 0!==n&&setTimeout((function(){n(a)}),100),e.preventDefault(),p.addClass("h5p-animate"),p.find(".h5p-popup-container").addClass("h5p-animate"),setTimeout((function(){a?p.hide():p.remove()}),100))};let p;if(a&&o&&h.popups[o.subContentId]&&(p=h.popups[o.subContentId]),void 0===p){p=s('<div class="h5p-popup-overlay '+r+'"><div class="h5p-popup-container" role="dialog"aria-modal="true" aria-live="true" aria-labelledby="popup-title-'+this.popupId+'"> <div role="button" tabindex="0" class="h5p-close-popup" title="'+this.l10n.close+'"></div><div class="h5p-popup-wrapper" role="document"></div></div></div>');const t=p.find(".h5p-popup-wrapper");e instanceof H5P.jQuery?t.append(e):t.html(e);let i="";t.children().each(((e,t)=>{t.setAttribute("id","popup-content-"+this.popupId+"-"+e),i+="popup-content-"+this.popupId+"-"+e+" "})),p.find(".h5p-popup-container").attr("aria-describedby",i),o&&o.subContentId&&(h.popups[o.subContentId]=p)}const m=p.find(".h5p-popup-container");return((e,t,i)=>{if(!i)return;t.css({visibility:"hidden"}),e.prependTo(this.$wrapper);let s=t.height(),n=t.width();const r=e.height();let o=n*(100/e.width()),a=s*(100/r);if(o>50&&a>50)return void e.detach();o>a&&a<45&&(o=Math.sqrt(o*a),t.css({width:o+"%"}));o>90?o=90:o<22&&(o=22);const l=100-o-5;let d=i.x;i.x>l?d=l:i.x<5&&(d=5),a=t.height()*(100/r);const h=100-a-10;let c=i.y;i.y>h?c=h:i.y<10&&(c=10),e.detach(),t.css({left:d+"%",top:c+"%"})})(p,m,i),p.addClass("h5p-animate"),m.css({visibility:""}).addClass("h5p-animate"),0===p.parent().length?p.prependTo(this.$wrapper):p.show(),p.removeClass("h5p-animate").click(c).find(".h5p-popup-container").removeClass("h5p-animate").click((function(){d=!0})).keydown((function(e){e.which===u&&c(e)})).find(".h5p-close-popup").focus(),this.disableTabIndexes(),f(p.find(".h5p-close-popup"),(e=>c(e))),p},ne.prototype.checkForSolutions=function(e){return void 0!==e.showSolutions||void 0!==e.showCPComments},ne.prototype.initKeyEvents=function(){if(void 0===this.keydown&&!this.activeSurface){var e=this,t=!1;this.keydown=function(i){t||((37!==i.keyCode&&33!==i.keyCode||!e.previousSlide(void 0,!1))&&(39!==i.keyCode&&34!==i.keyCode||!e.nextSlide(void 0,!1))||(i.preventDefault(),t=!0),t&&setTimeout((function(){t=!1}),300))},H5P.jQuery("body").keydown(this.keydown)}},ne.prototype.initTouchEvents=function(){var e,t,i,s,n,r,o=this,a=!1,l=!1,d=function(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}},h=d("");this.$slidesWrapper.bind("touchstart",(function(d){l=!1,i=e=d.originalEvent.touches[0].pageX,t=d.originalEvent.touches[0].pageY;const h=o.$slidesWrapper.width();s=0===o.currentSlideIndex?0:-h,n=o.currentSlideIndex+1>=o.slides.length?0:h,r=null,a=!0})).bind("touchmove",(function(h){var c=h.originalEvent.touches;a&&(o.$current.prev().addClass("h5p-touch-move"),o.$current.next().addClass("h5p-touch-move"),a=!1),i=c[0].pageX;var p=e-i;null===r&&(r=Math.abs(t-h.originalEvent.touches[0].pageY)>Math.abs(p)),1!==c.length||r||(h.preventDefault(),l||(p<0?o.$current.prev().css(d("translateX("+(s-p)+"px")):o.$current.next().css(d("translateX("+(n-p)+"px)")),o.$current.css(d("translateX("+-p+"px)"))))})).bind("touchend",(function(){if(!r){var t=e-i;if(t>o.swipeThreshold&&o.nextSlide(void 0,!1)||t<-o.swipeThreshold&&o.previousSlide(void 0,!1))return}o.$slidesWrapper.children().css(h).removeClass("h5p-touch-move")}))},ne.prototype.updateTouchPopup=function(e,t,i,s){if(arguments.length<=0)void 0!==this.touchPopup&&this.touchPopup.remove();else{var n="",r=.15;if(void 0!==this.$keywords&&void 0!==this.$keywords.children(":eq("+t+")").find("span").html())n+=this.$keywords.children(":eq("+t+")").find("span").html();else{var o=t+1;n+=this.l10n.slide+" "+o}void 0===this.editor&&t>=this.slides.length-1&&(n=this.l10n.showSolutions),void 0===this.touchPopup?this.touchPopup=H5P.jQuery("<div/>",{class:"h5p-touch-popup"}).insertAfter(e):this.touchPopup.insertAfter(e),s-e.parent().height()*r<0?s=0:s-=e.parent().height()*r,this.touchPopup.css({"max-width":e.width()-i,left:i,top:s}),this.touchPopup.html(n)}},ne.prototype.previousSlide=function(e,t=!0){var i=this.$current.prev();return!!i.length&&(t?this.processJumpToSlide(i.index(),e,!1):this.jumpToSlide(i.index(),e,null,!1))},ne.prototype.nextSlide=function(e,t=!0){var i=this.$current.next();return!!i.length&&(t?this.processJumpToSlide(i.index(),e,!1):this.jumpToSlide(i.index(),e,null,!1))},ne.prototype.isCurrentSlide=function(e){return this.currentSlideIndex===e},ne.prototype.getCurrentSlideIndex=function(){return this.currentSlideIndex},ne.prototype.attachAllElements=function(){for(var e=this.$slidesWrapper.children(),t=0;t<this.slides.length;t++)this.attachElements(e.eq(t),t);void 0!==this.summarySlideObject&&this.summarySlideObject.updateSummarySlide(this.slides.length-1,!0)},ne.prototype.processJumpToSlide=function(e,t,i){var s=this;if(void 0===this.editor&&this.contentId){var n=this.createXAPIEventTemplate("progressed");n.data.statement.object.definition.extensions["http://id.tincanapi.com/extension/ending-point"]=e+1,this.trigger(n)}if(!this.$current.hasClass("h5p-animate")){var r=this.$current.addClass("h5p-animate"),o=s.$slidesWrapper.children(),a=o.filter(":lt("+e+")");this.$current=o.eq(e).addClass("h5p-animate");var l=this.currentSlideIndex;this.currentSlideIndex=e,this.attachElements(this.$current,e);var d=this.$current.next();return d.length&&this.attachElements(d,e+1),this.setOverflowTabIndex(),setTimeout((function(){r.removeClass("h5p-current"),o.css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""}).removeClass("h5p-touch-move").removeClass("h5p-previous"),a.addClass("h5p-previous"),s.$current.addClass("h5p-current"),s.trigger("changedSlide",s.$current.index())}),1),setTimeout((function(){if(s.$slidesWrapper.children().removeClass("h5p-animate"),void 0===s.editor){var e=s.elementInstances[s.currentSlideIndex],t=s.slides[s.currentSlideIndex].elements;if(void 0!==e)for(var i=0;i<e.length;i++)t[i].displayAsButton||"function"!=typeof e[i].setActivityStarted||"function"!=typeof e[i].getScore||e[i].setActivityStarted()}}),250),void 0!==this.$keywords&&(this.keywordMenu.setCurrentSlideIndex(e),this.$currentKeyword=this.$keywords.find(".h5p-current"),t||this.keywordMenu.scrollToKeywords(e)),s.presentation.keywordListEnabled&&s.presentation.keywordListAlwaysShow&&s.showKeywords(),s.navigationLine&&(s.navigationLine.updateProgressBar(e,l,this.isSolutionMode),s.navigationLine.updateFooter(e),this.setSlideNumberAnnouncer(e,i)),s.summarySlideObject&&s.summarySlideObject.updateSummarySlide(e,!0),void 0!==this.editor&&void 0!==this.editor.dnb&&(this.editor.dnb.setContainer(this.$current),this.editor.dnb.blurAll()),this.trigger("resize"),this.fitCT(),!0}},ne.prototype.jumpToSlide=function(e,t=!1,i=null,s=!1,n=!1){if(this.standalone&&this.showSummarySlide&&e===this.slides.length-1&&!this.isSolutionMode&&this.isReportingEnabled&&!n){if(this.currentSlideIndex===this.slides.length-1)return!1;const n=se({headerText:this.l10n.confirmDialogHeader,dialogText:this.l10n.confirmDialogText,confirmText:this.l10n.confirmDialogConfirmationText});n.on("canceled",(()=>!1)),n.on("confirmed",(()=>{this.processJumpToSlide(e,t,s),i&&i()}))}else this.processJumpToSlide(e,t,s),i&&i()},ne.prototype.setOverflowTabIndex=function(){void 0!==this.$current&&this.$current.find(".h5p-element-inner").each((function(){const e=s(this);let t;this.classList.contains("h5p-table")&&(t=e.find(".h5p-table").outerHeight());const i=e.closest(".h5p-element-outer").innerHeight();void 0!==t&&null!==i&&t>i&&e.attr("tabindex",0)}))},ne.prototype.setSlideNumberAnnouncer=function(e,t=!1){let i="";if(!this.navigationLine)return i;const s=this.slides[e];s.keywords&&s.keywords.length>0&&!this.navigationLine.isSummarySlide(e)&&(i+=this.l10n.slide+" "+(e+1)+": "),i+=this.navigationLine.createSlideTitle(e),this.$slideAnnouncer.html(i),t&&this.$slideTop.focus()},ne.prototype.resetTask=function(){this.summarySlideObject?.toggleSolutionMode(!1);for(var e=0;e<this.elementInstances.length;e++)if(this.elementInstances[e])for(var t=0;t<this.elementInstances[e].length;t++){var i=this.elementInstances[e][t];i.resetTask&&i.resetTask()}this.navigationLine?.updateProgressBar(0),this.$container&&(this.jumpToSlide(0,!1),this.$container.find(".h5p-popup-overlay").remove())},ne.prototype.showSolutions=function(){for(var e=!1,t=[],i=!1,s=0;s<this.slidesWithSolutions.length;s++){if(void 0!==this.slidesWithSolutions[s]){this.elementsAttached[s]||this.attachElements(this.$slidesWrapper.children(":eq("+s+")"),s),e||(this.jumpToSlide(s,!1),e=!0);for(var n=0,r=0,o=[],a=0;a<this.slidesWithSolutions[s].length;a++){var l=this.slidesWithSolutions[s][a];void 0!==l.addSolutionButton&&l.addSolutionButton(),l.showSolutions&&l.showSolutions(),l.showCPComments&&l.showCPComments(),void 0!==l.getMaxScore&&(r+=l.getMaxScore(),n+=l.getScore(),i=!0,o.push(l.coursePresentationIndexOnSlide))}t.push({indexes:o,slide:s+1,score:n,maxScore:r})}if(this.showCommentsAfterSolution[s])for(let e=0;e<this.showCommentsAfterSolution[s].length;e++)"function"==typeof this.showCommentsAfterSolution[s][e].showCPComments&&this.showCommentsAfterSolution[s][e].showCPComments()}if(i)return t},ne.prototype.getSlideScores=function(e){for(var t=!0===e,i=[],s=!1,n=0;n<this.slidesWithSolutions.length;n++)if(void 0!==this.slidesWithSolutions[n]){this.elementsAttached[n]||this.attachElements(this.$slidesWrapper.children(":eq("+n+")"),n),t||(this.jumpToSlide(n,!1),t=!0);for(var r=0,o=0,a=[],l=0;l<this.slidesWithSolutions[n].length;l++){var d=this.slidesWithSolutions[n][l];void 0!==d.getMaxScore&&(o+=d.getMaxScore(),r+=d.getScore(),s=!0,a.push(d.coursePresentationIndexOnSlide))}i.push({indexes:a,slide:n+1,score:r,maxScore:o})}if(s)return i},ne.prototype.getCopyrights=function(){var e,t=new H5P.ContentCopyrights;if(this.presentation&&this.presentation.globalBackgroundSelector&&this.presentation.globalBackgroundSelector.imageGlobalBackground){var i=this.presentation.globalBackgroundSelector.imageGlobalBackground,s=new H5P.MediaCopyright(i.copyright);s.setThumbnail(new H5P.Thumbnail(H5P.getPath(i.path,this.contentId),i.width,i.height)),t.addMedia(s)}for(var n=0;n<this.slides.length;n++){var r=new H5P.ContentCopyrights;if(r.setLabel(this.l10n.slide+" "+(n+1)),this.slides[n]&&this.slides[n].slideBackgroundSelector&&this.slides[n].slideBackgroundSelector.imageSlideBackground){var o=this.slides[n].slideBackgroundSelector.imageSlideBackground,a=new H5P.MediaCopyright(o.copyright);a.setThumbnail(new H5P.Thumbnail(H5P.getPath(o.path,this.contentId),o.width,o.height)),r.addMedia(a)}if(void 0!==this.elementInstances[n])for(var l=0;l<this.elementInstances[n].length;l++){var d=this.elementInstances[n][l];if(this.slides[n].elements[l].action){var h=this.slides[n].elements[l].action.params,c=this.slides[n].elements[l].action.metadata;e=void 0,void 0!==d.getCopyrights&&(e=d.getCopyrights()),void 0===e&&(e=new H5P.ContentCopyrights,H5P.findCopyrights(e,h,this.contentId,{metadata:c,machineName:d.libraryInfo.machineName}));var p=l+1;void 0!==h.contentName?p+=": "+h.contentName:void 0!==d.getTitle?p+=": "+d.getTitle():h.l10n&&h.l10n.name&&(p+=": "+h.l10n.name),e.setLabel(p),r.addContent(e)}}t.addContent(r)}return t},ne.prototype.getXAPIData=function(){var e=this.createXAPIEventTemplate("answered"),t=e.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(t,{interactionType:"compound",type:"http://adlnet.gov/expapi/activities/cmi.interaction"});var i=this.getScore(),s=this.getMaxScore();e.setScoredResult(i,s,this,!0,i===s);var n=o(this.slidesWithSolutions).map((e=>{if(e&&e.getXAPIData)return e.getXAPIData()})).filter((e=>!!e));return{statement:e.data.statement,children:n}},ne.prototype.getContext=function(){return{type:"slide",value:this.currentSlideIndex+1}};const re=ne;H5P=H5P||{},H5P.Tooltip=H5P.Tooltip||function(){},H5P.CoursePresentation=re})()})();